# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Docker

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- TeamSpeak 6 —Å–µ—Ä–≤–µ—Ä —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker

## üîß –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ TS6 —Å–µ—Ä–≤–µ—Ä—É

### –í–∞—Ä–∏–∞–Ω—Ç 1: `network_mode: host` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –≤–∞—à TS6 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `network_mode: host`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∂–µ —Ä–µ–∂–∏–º –¥–ª—è –±–æ—Ç–∞:

**–ü–ª—é—Å—ã:**
- –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `127.0.0.1`
- –ü–æ—Ä—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –í `config.json` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `"host": "127.0.0.1"`
2. –í `docker-compose.yml` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `network_mode: host`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±—â–∞—è Docker —Å–µ—Ç—å

–ï—Å–ª–∏ TS6 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ Docker —Å–µ—Ç–∏:

**–ü–ª—é—Å—ã:**
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –£–∑–Ω–∞–π—Ç–µ –∏–º—è —Å–µ—Ç–∏ TS6: `docker network ls`
2. –£–∑–Ω–∞–π—Ç–µ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ TS6
3. –í `config.json` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"host": "teamspeak-server"`)
4. –í `docker-compose.yml` –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ —Ç–æ–π –∂–µ —Å–µ—Ç–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–æ–∑–¥–∞–π—Ç–µ config.json:**
```bash
cp config.example.json config.json
```

2. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ config.json:**
   - –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `host` (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
   - –£–∫–∞–∂–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Server Query

3. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ docker-compose.yml
docker-compose up -d

# –ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é
docker build -t ts6-music-bot .
docker run -d --name ts6-music-bot --network host -v $(pwd)/config.json:/app/config.json:ro ts6-music-bot
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
docker logs -f ts6-music-bot
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ TS6:
```bash
# –ï—Å–ª–∏ network_mode: host
docker exec ts6-music-bot ping -c 1 127.0.0.1

# –ï—Å–ª–∏ –æ–±—â–∞—è —Å–µ—Ç—å (–∑–∞–º–µ–Ω–∏—Ç–µ teamspeak-server –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ TS6 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
docker exec ts6-music-bot ping -c 1 teamspeak-server
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã:
```bash
# –ù–∞ —Ö–æ—Å—Ç–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–ª—É—à–∞–µ—Ç –ª–∏ TS6 –Ω–∞ –ø–æ—Ä—Ç–∞—Ö
netstat -tlnp | grep 10011  # SSH Query
netstat -tlnp | grep 9987   # Voice
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Server Query API** - —ç—Ç–æ—Ç –ø—Ä–æ—Ç–æ—Ç–∏–ø –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. **–î–ª—è –º—É–∑—ã–∫–∏** –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (–¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥)
3. **–ü–æ—Ä—Ç—ã Query API** (10011) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ (–≤ Docker —Å–µ—Ç–∏)

## üìù –ü—Ä–∏–º–µ—Ä docker-compose.yml –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 1 (host network)

```yaml
version: '3.8'

services:
  music-bot:
    build: .
    container_name: ts6-music-bot
    restart: unless-stopped
    network_mode: host
    volumes:
      - ./config.json:/app/config.json:ro
```

## üìù –ü—Ä–∏–º–µ—Ä docker-compose.yml –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 2 (–æ–±—â–∞—è —Å–µ—Ç—å)

```yaml
version: '3.8'

services:
  music-bot:
    build: .
    container_name: ts6-music-bot
    restart: unless-stopped
    volumes:
      - ./config.json:/app/config.json:ro
    networks:
      - teamspeak-network

networks:
  teamspeak-network:
    external: true  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–µ—Ç—å
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker-compose build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d
```